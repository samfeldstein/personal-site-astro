---
import fetchScores from "../scripts/lighthouse-scores.js";

export const prerender = true;

const isDev = import.meta.env.DEV;

// If isDev false, use Astro.url
const target = isDev ? `${Astro.site}` : `${Astro.url}`;

const data = isDev ? null : await fetchScores(target);

const score = isDev
  ? 100
  : data.lighthouseResult.categories.performance.score * 100;
---

<p>Total Performance: {score}/100</p>
